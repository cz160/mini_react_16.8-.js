{"version":3,"sources":["react/Component.js","react-dom/index.js","react/component.js","react/index.js","index.js"],"names":["Component","props","state","createComponent","comp","instance","prototype","render","console","log","constructor","renderComponent","base","renderer","_render","componentWillUpdate","componentDidMount","parentNode","replaceChild","componentDidUpdate","setComponentProps","componentWillMount","componentWillReceiveProps","vnode","container","appendChild","undefined","String","document","createTextNode","tag","attrs","childrens","dom","createElement","Object","keys","forEach","key","setAttribute","child","value","test","toLowerCase","style","cssText","k","removeAttribute","stateChange","assign","Home","num","handleClick","bind","setState","React","ReactDOM","querySelector"],"mappings":";;AIAA;;AACA;;;AFDA,ACAA;AFAA;IDAMA,YACJ,qBAAuB;AAAA,MAAXC,KAAW,uEAAH,EAAG;AGAzB,SAASiC,aAAT,CAAuBJ,GAAvB,EAA2BC,KAA3B,EAA8C;AHArB,AGAqB,oCAAVC,SAAU;AAAVA,IAAAA,SAAU;AFC9C,ADAI,AGD0C,OHCrC/B,KAAL,GAAaA,KAAb;ACCJ,ADAI,IEAED,GFAGE,ECAAC,GDAL,GAAa,EAAb,OCAJ,CAAyBC,IAAzB,EAA8BH,KAA9B,EAAoC;AAClC,ADAC,AGFD,SAAO;AFGP,AEFE6B,IAAAA,EFEEzB,CEFC,EAAHyB,GADK,EFGP;ACDA,ACDO,eHGM9B,QEFU;ADEvB,ACFuB,ACArB+B,IAAAA,EFEC3B,ECFSH,CCAL,CFEA,CAACK,AEFNyB,EDAqB,GCFhB,IFIJ,IAAkB3B,IAAI,CAACE,SAAL,CAAeC,MAApC,EAA2C,qCCFvB,EAAG;ADEsB,AEFpC;AFGPF,ACHqB,ACCrB2B,IFEA3B,AEFA2B,QFEQ,CEFC,EFEE,AEFXA,IFEe5B,IAAJ,CELN,CFKL,AEFU;AFGVI,IAAAA,OAAO,CAACC,GAAR,CAAYJ,QAAZ;AACD,ACJC,ACHK,GFIP,AEJA,MFOK,ACJEJ,KAAL,GAAaA,KAAb;ADIK,ACHL,ACCH,SDDQC,KAAL,GAAa,EAAb;ADIAG,ACHD,IDGCA,QAAQ,GAAG,IAAIL,kBAAJ,CAAcC,KAAd,CAAX;AGRJ,AHSII,IAAAA,QAAQ,CAACK,EEHE,SFGX,GAAuBN,IAAvB;AGRJ,ADME8B,EAAAA,aAAa,EAAbA,aADa;ACJf,AHQI7B,AEFFL,EAAAA,EFEEK,OEFO,CFEC,CAACE,AEFXP,MFEE,GAAkB,YAAU;AGPhC,AHQM,AELS,aFKF,KAAKU,WAAL,ACLFsC,CDKmB/C,KAAjB,CAAP,MCLiB;AEFvB,AHQK,ACLDkC,KDGA,CCHAA,MAAM,CAACc,MAAP,CAAc,KAAK/C,KAAnB,EAAyB8C,WAAzB;AEFJ,AHQG,ACLC,kCAAgB,IAAhB;AEFJ,AFGG;AEFH,AHOE,SAAO3C,QAAP;AGNF,AHOC,EACD;AGPA;AAEA;AACA,AHKO,SAASM,eAAT,CAAyBP,IAAzB,E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","file":"blog-react.e31bb0bc.js","sourceRoot":"..","sourcesContent":["class Component{\n  constructor(props = {}){\n    this.props = props;\n    this.state = {};\n  }\n}\nexport default Component;","import Component from \"../react/Component\";\n\n// 创建组件\nfunction createComponent(comp,props){\n  // 区分函数形式和类形式\n  let instance;\n  if(comp.prototype && comp.prototype.render){ // 类组件\n    instance = new comp();\n    console.log(instance);\n  }else{ // 函数组件(将其转换为类组件)\n    instance = new Component(props);\n    instance.constructor = comp;\n    instance.render = function(){\n      return this.constructor(props);\n    }\n  }\n  return instance;\n}\n// 渲染||更新组件\nexport function renderComponent(comp){\n  let base;\n  const renderer = comp.render(); // 虚拟dom\n  base = _render(renderer) // 节点\n  if(comp.base){\n    if(comp.componentWillUpdate) comp.componentWillUpdate();\n  }else if(comp.componentDidMount){\n    comp.componentDidMount();\n  }\n  // 替换节点\n  if(comp.base && comp.base.parentNode){\n    comp.base.parentNode.replaceChild(base,comp.base);\n    if(comp.componentDidUpdate) comp.componentDidUpdate();\n  }\n  comp.base = base;\n}\n// 设置组件属性\nfunction setComponentProps(comp,props){\n  if(!comp.base){\n    if(comp.componentWillMount) comp.componentWillMount();\n    if(comp.componentWillReceiveProps) comp.componentWillReceiveProps();\n  }\n  comp.props = props;\n}\n\n// 渲染页面\nfunction render(vnode,container){ // 参数：虚拟dom,容器节点\n  return container.appendChild(_render(vnode))\n}\n// 将虚拟dom转化为真实dom\nfunction _render(vnode){ \n  if(vnode === undefined || typeof vnode === 'boolean'|| vnode===null) return;\n  if(typeof vnode === 'number') vnode = String(vnode);\n  // 如果Vode是一个文本节点\n  if(typeof vnode === 'string'){\n    return document.createTextNode(vnode);  \n  }\n  const { tag,attrs,childrens } = vnode;\n  // 如果为组件\n  if(typeof tag === 'function'){\n    // 创建组件\n    const comp = createComponent(tag,attrs);\n    // 设置组件属性\n    setComponentProps(comp,attrs);\n    // 渲染组件\n    renderComponent(comp);\n    // 返回组件待渲染的节点\n    return comp.base;\n  }\n  const dom = document.createElement(tag);\n  if(attrs){\n    Object.keys(attrs).forEach(key=>{\n      // 设置属性\n      setAttribute(dom,key,attrs[key]);\n    })\n  }\n  // 递归渲染子节点\n  childrens && childrens.forEach(child => {\n    render(child,dom);\n  });\n  return dom;\n}\n// 设置属性\nfunction setAttribute(dom,key,value){\n  if(key === 'className'){\n    key = 'class';\n  }\n  // 如果是事件：onClick...\n  if(/on\\w+/.test(key)){\n    // 转为小写\n    key = key.toLowerCase();\n    dom[key] = value || '';\n  }else if(key === 'style'){ // 值可以为对象和字符串\n    if(!value || typeof value ==='string'){\n      dom.style.cssText = value || '';\n    }else if(value && typeof value === 'object'){\n      for(let k in value){\n        if(typeof value[k] === 'number'){\n          dom.style[k] = value[k]+'px';\n        }else{\n          dom.style[k] = value[k];\n        }\n      }\n    }\n  }else{\n    if(key in dom){\n      dom[key] = value || '';\n    }\n    if(value){\n      // 更新值\n      dom.setAttribute(key,value);\n    }else{\n      dom.removeAttribute(key);\n    }\n  }\n}\nexport default {\n  render\n}","import {\n  renderComponent\n} from '../react-dom/index';\nclass Component{\n  constructor(props = {}){\n    this.props = props;\n    this.state = {};\n  }\n  setState(stateChange){\n    Object.assign(this.state,stateChange);\n    renderComponent(this);\n  }\n}\nexport default Component;","import Component from './component';\nfunction createElement(tag,attrs,...childrens){\n  return {\n    tag, // 外层标签\n    attrs, // 所有属性(对象)\n    childrens // 所有孩子节点(数组)\n  }\n}\nexport default {\n  createElement,\n  Component,\n};","import React from './react';\nimport ReactDOM from './react-dom';\n// 普通式\n// const ele = (\n//   <div className='active' title=\"123\">\n//     <span style={{color:'red'}}>Hello React</span>\n//     <div>\n//       <p>111</p>\n//       <p>222</p>\n//     </div>\n//   </div>\n// )\n\n// 函数式组件\n// function Home(){\n//   return (\n//     <div className='active' title=\"123\">\n//       <span style={{color:'red'}}>Hello React</span>\n//       <div>\n//         <p>111</p>\n//         <p>222</p>\n//       </div>\n//     </div>\n//   )\n// }\n\n// 类式组件\nclass Home extends React.Component{\n  constructor(props){\n    super(props)\n    this.state = {\n      num:0,\n    }\n  }\n  componentWillMount(){\n    console.log('组件将要渲染');\n  }\n  componentDidMount(){\n    console.log('组件已经渲染');\n  }\n  componentWillUpdate(){\n    console.log('组件将要更新');\n  }\n  componentDidUpdate(){\n    console.log('组件已经更新');\n  }\n  render(){\n    return (\n      <div>\n        <span>Hello React</span>\n        <span>我当前等于:{this.state.num}</span>\n        <button onClick={this.handleClick.bind(this)}>点我</button>\n      </div>\n    )\n  }\n  handleClick(){\n    this.setState({\n      num:this.state.num+1\n    })\n  }\n}\n\nReactDOM.render(<Home title={\"cz\"}/>,document.querySelector('#root'))\n"]}